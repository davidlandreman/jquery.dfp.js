(function(e,t,n){"use strict";var r=this,i="",s=0,o=0,u=".adunit",a={},f=false,l,c="googleAdUnit",h=function(t,n,r){e("body").trigger("beforeAdsLoad",r);i=t;l=e(n);E();p(r);v();m()},p=function(n){var r=g();a={setTargeting:{inURL:r.inURL,URLIs:r.URLIs,Query:r.Query,Domain:t.location.host},adUnitName:"",enableAdChoices:true,adChoicesUrl:"http://www.dispatch.com/adchoices",enableSingleRequest:true,collapseEmptyDivs:"original",targetPlatform:"web",enableSyncRendering:false,refreshExisting:false};try{var i=e.parseJSON(e("meta[name=dfp-targeting]").attr("content"));e.each(i,function(e,t){a.setTargeting[e]=t})}catch(s){}e.extend(true,a,n);if(a.googletag){t.googletag.cmd.push(function(){e.extend(t.googletag,a.googletag)})}},d=function(e){if(a.enableAdChoices){e.prepend('<div class="ad-choices"><a href="'+a.adChoicesUrl+'">AdChoices</a></div>')}},v=function(){l.each(function(){var n=e(this);s++;var r=b(n);var u=y(n,r,s);var f=w(n);var h=n.html();n.html("").addClass("display-none");t.googletag.cmd.push(function(){var p,v=n.data(c);if(v&&a.refreshExisting){p=v}else{if(n.data("outofpage")){p=t.googletag.defineOutOfPageSlot("/"+i+"/"+r,u).addService(t.googletag.pubads())}else{p=t.googletag.defineSlot("/"+i+"/"+r,f,u).addService(t.googletag.pubads())}}if(n.data("targeting")){e.each(n.data("targeting"),function(e,t){p.setTargeting(e,t)})}p.oldRenderEnded=p.oldRenderEnded||p.renderEnded;p.renderEnded=function(){o++;var t=n.css("display");if(t==="none"&&e.trim(h).length>0&&a.collapseEmptyDivs==="original"){n.show().html(h);t="block display-original"}d(n);n.removeClass("display-none").addClass("display-"+t);p.oldRenderEnded();n.trigger("adLoaded");if(o===s){l.trigger("allAdsLoaded")}};n.data(c,p)})});t.googletag.cmd.push(function(){if(a.enableSingleRequest===true){t.googletag.pubads().enableSingleRequest()}e.each(a.setTargeting,function(e,n){t.googletag.pubads().setTargeting(e,n)});if(a.collapseEmptyDivs===true||a.collapseEmptyDivs==="original"){t.googletag.pubads().collapseEmptyDivs()}t.googletag.enableServices()})},m=function(){l.each(function(){var n=e(this),r=n.data(c);if(a.refreshExisting&&r&&n.hasClass("display-block")){t.googletag.cmd.push(function(){t.googletag.pubads().refresh([r])})}else{t.googletag.cmd.push(function(){t.googletag.display(n.attr("id"))})}})},g=function(){var e=t.location.pathname.replace(/\/$/,""),n=new RegExp("/([^/]*)","ig"),r=e.match(n),i=["/"],s="";if(r&&e!=="/"){var o="",u=r.length;if(u>0){for(var a=0;a<u;a++){o=r[a];i.push(o);for(var f=a+1;f<u;f++){o+=r[f];i.push(o)}if(a===0){i.splice(-1,1);s=o}}}i.push(s)}i=i.reverse();var l=t.location.toString().replace(/\=/ig,":").match(/\?(.+)$/),c=RegExp.$1.split("&");return{inURL:i,URLIs:i[0],Query:c}},y=function(e,t,n){return e.attr("id",t+"-auto-gen-id-"+n).attr("id")},b=function(t){return a.adUnitName||t.data("adunit")||e("meta[name=dfp-adunit]").attr("content")||t.attr("id")},w=function(t){var n=[],r=t.data("dimensions");if(r){var i=r.split(",");e.each(i,function(e,t){var r=t.split("x");n.push([parseInt(r[0],10),parseInt(r[1],10)])})}else{n.push([t.width(),t.height()])}return n},E=function(){f=f||e('script[src*="googletagservices.com/tag/js/gpt.js"]').length;if(f&&a.refreshExisting){return}t.googletag={};t.googletag.cmd=t.googletag.cmd||[];var n=document.createElement("script");n.async=true;n.type="text/javascript";n.onerror=function(){S()};var r="https:"===document.location.protocol;n.src=(r?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i);if(n.style.display==="none"){S()}},S=function(){var n=t.googletag.cmd;setTimeout(function(){t.googletag={cmd:{push:function(e){e.call(r)}},ads:[],pubads:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(e,n,r){t.googletag.ads.push(r);t.googletag.ads[r]={renderEnded:function(){},addService:function(){return this}};return t.googletag.ads[r]},defineOutOfPageSlot:function(e,n){t.googletag.ads.push(n);t.googletag.ads[n]={renderEnded:function(){},addService:function(){return this}};return t.googletag.ads[n]},display:function(e){t.googletag.ads[e].renderEnded.call(r);return this}};e.each(n,function(e,n){t.googletag.cmd.push(n)})},50)};e.dfp=e.fn.dfp=function(t,r){r=r||{};if(t===n){t=i||e("meta[name=dfp-id]").attr("content")}if(typeof t==="object"){r=t;t=r.dfpID||i||e("meta[name=dfp-id]").attr("content")}var s=this;if(typeof this==="function"){s=u}h(t,s,r);return this};e(function(){e.dfp()})})(window.jQuery||window.Zepto||window.tire,window)